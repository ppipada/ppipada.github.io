<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Find median from data stream# Levels: level-5 Data structures: heap Practice Link# LeetCode
Description# Median is the middle value in an ordered integer list.
If the size of the list is even, there is no middle value.
So the median is the mean of the two middle value.
1For example, 2[2,3,4], the median is 3 3 4[2,3], the median is (2 &#43; 3) / 2 = 2.5 Design a data structure that supports the following two operations:
">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="https://pankajpipada.com/tech-interview-prep/problems/find-median-from-data-stream/">
  <meta property="og:site_name" content="Tech Interview Prep">
  <meta property="og:title" content="Find median from data stream">
  <meta property="og:description" content="Find median from data stream# Levels: level-5 Data structures: heap Practice Link# LeetCode
Description# Median is the middle value in an ordered integer list.
If the size of the list is even, there is no middle value.
So the median is the mean of the two middle value.
1For example, 2[2,3,4], the median is 3 3 4[2,3], the median is (2 &#43; 3) / 2 = 2.5 Design a data structure that supports the following two operations:">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="website">


  <meta itemprop="name" content="Find median from data stream">
  <meta itemprop="description" content="Find median from data stream# Levels: level-5 Data structures: heap Practice Link# LeetCode
Description# Median is the middle value in an ordered integer list.
If the size of the list is even, there is no middle value.
So the median is the mean of the two middle value.
1For example, 2[2,3,4], the median is 3 3 4[2,3], the median is (2 &#43; 3) / 2 = 2.5 Design a data structure that supports the following two operations:">
  <meta itemprop="wordCount" content="213">
  <meta itemprop="keywords" content="Heap,Level-5">

<title>Find median from data stream | Tech Interview Prep</title>
<link rel="icon" href="/tech-interview-prep/favicon.ico" >
<link rel="manifest" href="/tech-interview-prep/manifest.json">
<link rel="canonical" href="https://pankajpipada.com/tech-interview-prep/problems/find-median-from-data-stream/">
<link rel="stylesheet" href="/tech-interview-prep/book.min.a567a91bee849fdc8e389499c30737d9ada1b560975fb536f0b49c53aa5a0619.css" integrity="sha256-pWepG&#43;6En9yOOJSZwwc32a2htWCXX7U28LScU6paBhk=" crossorigin="anonymous">


  <script defer src="/tech-interview-prep/fuse.min.js"></script>
  <script defer src="/tech-interview-prep/en.search.min.713e407e217a317ce31d77e165ee40078abbdb00815736255b852dabe752b6c5.js" integrity="sha256-cT5AfiF6MXzjHXfhZe5AB4q72wCBVzYlW4Utq&#43;dStsU=" crossorigin="anonymous"></script>

		<script async src="https://www.googletagmanager.com/gtag/js?id=G-PVSXVYRTKF"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-PVSXVYRTKF');
        </script>

<link rel="alternate" type="application/rss+xml" href="https://pankajpipada.com/tech-interview-prep/problems/find-median-from-data-stream/index.xml" title="Tech Interview Prep" />

  
</head>
<body dir="ltr" class="book-kind-section book-type-problems">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    
<aside class="book-menu">
  <div class="book-menu-content">
    
  <nav>
<h4 class="scramblings-brand"><a
		class="flex align-center"
		href="
			https://pankajpipada.com/
		"
	><img src="/tech-interview-prep/icon-32x32.png" alt="Logo" /><span class="text-sm">Scramblings</span>
	</a>
</h4>


<div class="book-search hidden">
  <input id="book-search-input" type="text" 
    placeholder="Search"
    aria-label="Search"
    maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>




<ul>
	<li>
		<a href="/tech-interview-prep/">
			<span>Tech Interview Prep</span>
		</a>
	</li>
</ul>







  



  
	
	<ul>
		
			
				<li>
					
	
	
	

	
		<a href="/tech-interview-prep/levels/problems/" class="">
			Path: Levels</a>
	

					
	
	<ul>
		
			
				<li>
					
	
	
	

	
		<a href="/tech-interview-prep/levels/problems/" class="">
			Problems</a>
	

				</li>
			
		
	</ul>

				</li>
			
		
			
				<li>
					
	
	
	

	
		<a href="/tech-interview-prep/patterns/problems/" class="">
			Path: Patterns</a>
	

					
	
	<ul>
		
			
				<li>
					
	
	
	

	
		<a href="/tech-interview-prep/patterns/problems/" class="">
			Problems</a>
	

				</li>
			
		
	</ul>

				</li>
			
		
			
				<li>
					
	
	
	

	
		<a href="/tech-interview-prep/data-structures/quick-notes/" class="">
			Path: Data Structures</a>
	

					
	
	<ul>
		
			
				<li>
					
	
	
	

	
		<a href="/tech-interview-prep/data-structures/quick-notes/" class="">
			Quick Notes</a>
	

				</li>
			
		
			
				<li>
					
	
	
	

	
		<a href="/tech-interview-prep/data-structures/problems/" class="">
			Problems</a>
	

				</li>
			
		
	</ul>

				</li>
			
		
			
				<li>
					
	
	
	

	
		<a href="/tech-interview-prep/algorithms/quick-notes/" class="">
			Path: Algorithms</a>
	

					
	
	<ul>
		
			
				<li>
					
	
	
	

	
		<a href="/tech-interview-prep/algorithms/quick-notes/" class="">
			Quick Notes</a>
	

				</li>
			
		
			
				<li>
					
	
	
	

	
		<a href="/tech-interview-prep/algorithms/problems/" class="">
			Problems</a>
	

				</li>
			
		
	</ul>

				</li>
			
		
			
				<li>
					
	
	
	

	
		<a href="/tech-interview-prep/problems/" class="">
			All Problems</a>
	

					
	
	<ul>
		
	</ul>

				</li>
			
		
			
				<li>
					
	
	
	

	
		<a href="/tech-interview-prep/system-design/" class="">
			System Design</a>
	

				</li>
			
		
			
				<li>
					
	
	
	

	
		<a href="/tech-interview-prep/external/" class="">
			External References</a>
	

				</li>
			
		
	</ul>













</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>



  </div>
</aside>
 

    <div class="book-page">
      <header class="book-header hidden">
        
  <div class="flex align-center justify-between">
	<label for="menu-control">
		<img src="/tech-interview-prep/icons/menu.svg" class="book-icon" alt="Menu" />
	</label>

	<label for="toc-control">
		
	</label>
</div>


  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="find-median-from-data-stream">Find median from data stream<a class="anchor" href="#find-median-from-data-stream">#</a></h1>
<div style="margin: .5rem 0 1rem 0;"><div>
				<strong>Levels:&ensp;</strong><a href="https://pankajpipada.com/tech-interview-prep/levels/problems/#level-5">level-5</a></div><div>
				<strong>Data structures:&ensp;</strong><a href="https://pankajpipada.com/tech-interview-prep/data-structures/problems/#heap">heap</a></div></div>

<h2 id="practice-link">Practice Link<a class="anchor" href="#practice-link">#</a></h2>
<p><a href="https://leetcode.com/problems/find-median-from-data-stream/">LeetCode</a></p>
<h2 id="description">Description<a class="anchor" href="#description">#</a></h2>
<ul>
<li>
<p>Median is the middle value in an ordered integer list.</p>
</li>
<li>
<p>If the size of the list is even, there is no middle value.</p>
</li>
<li>
<p>So the median is the mean of the two middle value.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-text" data-lang="text"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>For example,
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>[2,3,4], the median is 3
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>[2,3], the median is (2 + 3) / 2 = 2.5</span></span></code></pre></div></li>
<li>
<p>Design a data structure that supports the following two operations:</p>
<ul>
<li>void addNum(int num): Add a integer number from the data stream to the data structure.</li>
<li>double findMedian(): Return the median of all elements so far.</li>
</ul>
</li>
</ul>
<h2 id="example">Example<a class="anchor" href="#example">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-text" data-lang="text"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>addNum(1)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>addNum(2)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>findMedian() -&gt; 1.5
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>addNum(3)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>findMedian() -&gt; 2</span></span></code></pre></div><h2 id="follow-up">Follow up<a class="anchor" href="#follow-up">#</a></h2>
<ul>
<li>If all integer numbers from the stream are between 0 and 100, how would you optimize it?</li>
<li>If 99% of all integer numbers from the stream are between 0 and 100, how would you optimize it?</li>
</ul>
<h2 id="python-solution">Python Solution<a class="anchor" href="#python-solution">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-py" data-lang="py"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#f92672">from</span> heapq <span style="color:#f92672">import</span> heappush, heappushpop, heappop
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MedianFinder</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">__init__</span>(self):
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>        self<span style="color:#f92672">.</span>heaps <span style="color:#f92672">=</span> [], []
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">addNum</span>(self, num):
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>        small, large <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>heaps
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>        heappush(small, <span style="color:#f92672">-</span>heappushpop(large, num))
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>        <span style="color:#66d9ef">if</span> len(large) <span style="color:#f92672">&lt;</span> len(small):
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>            heappush(large, <span style="color:#f92672">-</span>heappop(small))
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">findMedian</span>(self):
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>        small, large <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>heaps
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>        <span style="color:#66d9ef">if</span> len(large) <span style="color:#f92672">&gt;</span> len(small):
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>            <span style="color:#66d9ef">return</span> float(large[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>        <span style="color:#66d9ef">return</span> (large[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">-</span> small[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2.0</span></span></span></code></pre></div>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">

<div>

</div>

<div>

</div>

</div>



  



  
  
  


 
        
  
  <div class="book-comments">

</div>
  
 
        <div class="text-center p-0">
	<ul id="nav-social" class="list-inline">
		
			<li class="list-inline-item my-0 mr-3 ml-0 p-0">
				<a href="https://github.com/ppipada" target="_blank" aria-label="github">
					<i class="fab fa-github fa-1x text-muted"></i>
				</a>
			</li>
		
			<li class="list-inline-item my-0 mr-3 ml-0 p-0">
				<a href="https://www.linkedin.com/in/ppipada/" target="_blank" aria-label="linkedin">
					<i class="fab fa-linkedin-in fa-1x text-muted"></i>
				</a>
			</li>
		
			<li class="list-inline-item my-0 mr-3 ml-0 p-0">
				<a href="https://letterboxd.com/ppipada/" target="_blank" aria-label="letterboxd">
					<i class="fab fa-letterboxd fa-1x text-muted"></i>
				</a>
			</li>
		
			<li class="list-inline-item my-0 mr-3 ml-0 p-0">
				<a href="mailto:ppipada@gmail.com" target="_blank" aria-label="mail">
					<i class="fas fa-at fa-1x text-muted"></i>
				</a>
			</li>
		
			<li class="list-inline-item my-0 mr-3 ml-0 p-0">
				<a href="https://pankajpipada.com/index.xml" target="_blank" aria-label="rss">
					<i class="fas fa-rss fa-1x text-muted"></i>
				</a>
			</li>
		
	</ul>
</div>

        
  
  <div class="book-copyright flex justify-center">
    <small>Tech Interview Prep - Copyright © 2016-Present Pankaj Pipada. All Rights Reserved.</small>
  </div>
  
 
        
  
  
    <script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script>
  

      </footer>

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  
 
  </main>

  
	
	<script src="https://pankajpipada.com/tech-interview-prep/js/copybutton.min.eb1935355b430030f89358fc7901ef972a3973b27cf70b5efba79813702b47ac.js" integrity="sha256-6xk1NVtDADD4k1j8eQHvlyo5c7J89wte&#43;6eYE3ArR6w=" defer></script>


</body>
</html>




















